<!DOCTYPE html>
<html>
  <head>
  <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
  <script>
  $(document).ready(function() {
  

    function randomstring(L){
    var s= '';
    var randomchar=function(){
      var n= Math.floor(Math.random()*62);
      if(n<10) return n; //1-10
      if(n<36) return String.fromCharCode(n+55); //A-Z
      return String.fromCharCode(n+61); //a-z
    }
    while(s.length< L) s+= randomchar();
    return s;
    } 

    $( "#s" ).click(function() {
        var a  = $("#add").val();
          while(a > 0)
          {
            var p = randomstring(10);
            var q = Math.floor((Math.random() * 100) + 1);
            ajax_insert(p,q);
            a = a-1;
          }
        
    });

  
    function ajax_insert(p,q)
    {
        var start_time = new Date().getTime();
        $.ajax({
        url: "https://elixier.herokuapp.com/api/devices/temp/add",
        type: "get", //send it through get method
        dataType: 'json',
        data:{ fname: p, trange: q},
        success: function(response) {
          //Do Something
          var request_time = new Date().getTime() - start_time;
          console.log(response);
          $("#container").empty();
          for(var i=0;i<response.items.length;i++)
          {
              $("#container").append("<h2> Inserted value : " + p + "--  " + q  + "  Time for request : "  +  request_time+ " ms" + "</h2>");
          }
        },
        error: function(xhr) {
          //Do Something to handle error
          var request_time = new Date().getTime() - start_time;
          $("#container").append("<h2> API request failed for : " + p + "--  " + q  + "  Time for request : "  +  request_time+ " ms" + "</h2>");
        }
    });


    }

    function ajax_name(param){

        $.ajax({
        url: "https://elixier.herokuapp.com/api/devices/namesearch",
        type: "get", //send it through get method
        dataType: 'json',
        data:{ fname: param},
        success: function(response) {
          //Do Something
          console.log(response);
          $("#container").empty();
          for(var i=0;i<response.items.length;i++)
          {
              $("#container").append("<p>" + response.items[i].Name +  " -- " +  response.items[i].Range + "</p>");
          }
        },
        error: function(xhr) {
          //Do Something to handle error
        }
    });

    }
   
    

  });
  </script>
  </head>
  <body>   
    <header>
      <div class="container">
        <h1 class="logo">Flask App</h1>
      </div>
    </header> 

    <h3>Benchmark add api</h3>
    <label for="p">Enter number of api requests</label>
    <input type="text" name="p" id="add"/>
    <input type="button" id="s" value="Benchmark Now!">

   


    <div id="container">
    
    </div>

    <div id="container2">
    
    </div>

  </body>
</html>